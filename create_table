-- Tabella Studente
CREATE TABLE studenti (
    matricola INT PRIMARY KEY,
    nome VARCHAR(50),
    cognome VARCHAR(50),
    codice_fiscale VARCHAR(16),
    luogo_nascita VARCHAR(100),
    data_nascita DATE,
    data_immatricolazione DATE
);
-- Tabella Docente
CREATE TABLE docenti (
    id_docente INT PRIMARY KEY,
    nome VARCHAR(50),
    cognome VARCHAR(50)
);
-- Tabella Esame
CREATE TABLE esami (
    id_esame INT PRIMARY KEY,
    nome VARCHAR(100),
    descrizione VARCHAR(500),
    min_prove INT,
    max_prove INT,
    docente_responsabile INT,
    FOREIGN KEY (docente_responsabile) REFERENCES docenti(id_docente)
);

-- Tabella Prova
CREATE TABLE prove (
    id_prova INT PRIMARY KEY,
    appello DATE,
    tipo VARCHAR(50),
    ricaduta_esame VARCHAR(50),
    opzionale BOOLEAN,
    esame_appartenente INT,
     FOREIGN KEY (esame_appartenente) REFERENCES esami(id_esame)
);
-- Tabella prova sostenuta
CREATE TABLE prove_sostenuta (
    id_studente INT,
    id_prova INT,
    data_appello DATE,
    data_superamento DATE,
    data_scadenza DATE,
    voto DECIMAL(3,1),
    FOREIGN KEY (id_studente) REFERENCES studenti(id_studente),
    FOREIGN KEY (id_prova) REFERENCES prove(id_prova)
);

-- Tabella gestione prova
CREATE TABLE prova_gestita (
    id_docente INT, 
    id_prova INT,
    FOREIGN KEY (id_prova) REFERENCES prove(id_prova),
    FOREIGN KEY (id_docente) REFERENCES DOCENTI(id_docente)
)